<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Teaching Methods – Flashcards</title>
  <style>
    :root{
      --bg:#f7f9fc;
      --text:#1f2937;
      --muted:#6b7280;
      --card:#ffffff;
      --shadowA: rgba(0,0,0,.15);
      --shadowB: rgba(255,255,255,.7);
      --accent:#a0c4ff; /* در زمان باز شدن مودال از رنگ دایره مقداردهی می‌شود */
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background: var(--bg);
      color: var(--text);
      text-align:center;
      padding:40px 20px 60px;
    }
    h1{
      margin:0 0 8px;
      font-size: clamp(22px,3vw,32px);
      letter-spacing:.2px;
    }
    .sub{
      margin:0 0 28px;
      color: var(--muted);
      font-size:14px;
    }

    /* دایره‌ها */
    .container{
      display:flex; flex-wrap:wrap; justify-content:center; gap:28px;
      max-width:1100px; margin:0 auto;
    }
    .circle{
      width:120px; height:120px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      color:#222; font-weight:700; font-size:13px; text-align:center;
      cursor:pointer; user-select:none;
      box-shadow: 6px 6px 14px var(--shadowA), -6px -6px 14px var(--shadowB);
      transition: transform .25s, box-shadow .25s, filter .25s;
      padding:14px;
    }
    .circle:hover{
      transform: scale(1.12);
      box-shadow: 10px 10px 22px rgba(0,0,0,.22), -8px -8px 18px rgba(255,255,255,.8);
      filter: brightness(1.08) saturate(1.05);
    }
    /* چیدمان نامنظم (ملایم) */
    .circle:nth-child(3n){ transform: rotate(-6deg) translateY(10px); }
    .circle:nth-child(4n){ transform: rotate(5deg) translateY(-12px); }
    .circle:nth-child(5n){ transform: rotate(-8deg) translateX(8px); }
    .circle:nth-child(7n){ transform: rotate(4deg) translateX(-6px) translateY(4px); }

    /* 30 رنگ پاستیلی (هیچ‌کدام سفید خالص نیست) */
    .c1{background:#ffd6a5} .c2{background:#fdffb6} .c3{background:#caffbf} .c4{background:#9bf6ff} .c5{background:#a0c4ff}
    .c6{background:#bdb2ff} .c7{background:#ffc6ff} .c8{background:#ffadad} .c9{background:#ffdab9} .c10{background:#e2f0cb}
    .c11{background:#b5ead7} .c12{background:#c7ceea} .c13{background:#fbc4ab} .c14{background:#fde2e4} .c15{background:#fad2e1}
    .c16{background:#e4c1f9} .c17{background:#d0f4de} .c18{background:#ffe5d9} .c19{background:#ffdeeb} .c20{background:#e2ece9}
    .c21{background:#dfe7fd} .c22{background:#f1f7b5} .c23{background:#ffb5a7} .c24{background:#fcd5ce} .c25{background:#d8e2dc}
    .c26{background:#ece4db} .c27{background:#fde4cf} .c28{background:#cddafd} .c29{background:#e9edc9} .c30{background:#fec5bb}

    /* MODAL */
    .modal{display:none; position:fixed; inset:0; z-index:1000;
      background: radial-gradient(1200px 800px at 70% 20%, rgba(0,0,0,.55), rgba(0,0,0,.7));
      justify-content:center; align-items:center; padding:24px;
      animation:fadeIn .25s ease;
    }
    body.modal-open{overflow:hidden}
    .modal-card{
      width:min(860px,92vw);
      background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 18%, #fff) 0%, #ffffff 60%);
      border:1px solid color-mix(in srgb, var(--accent) 35%, #cbd5e1);
      border-radius:20px;
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
      text-align:left; position:relative; overflow:hidden;
      animation:popIn .32s ease;
    }
    .card-header{
      padding:18px 68px 16px 22px;
      background: linear-gradient(135deg, color-mix(in srgb, var(--accent) 65%, #fff), color-mix(in srgb, var(--accent) 30%, #fff) 60%);
      color:#0b1220;
    }
    .title{
      margin:0; font-weight:800; letter-spacing:.3px;
      font-size: clamp(18px,2.6vw,26px);
    }
    .chip{
      display:inline-block; margin-top:6px; font-size:12px; color:#0b1220; opacity:.85;
      background: color-mix(in srgb, var(--accent) 35%, #fff);
      border:1px solid color-mix(in srgb, var(--accent) 55%, #cbd5e1);
      padding:4px 8px; border-radius:999px;
    }
    .close{
      position:absolute; right:12px; top:10px; width:40px; height:40px; border-radius:50%;
      border:none; cursor:pointer; font-size:22px; line-height:40px; text-align:center;
      background: #ffffffaa;
      box-shadow: 4px 4px 10px rgba(0,0,0,.15), -4px -4px 10px rgba(255,255,255,.7);
      transition: transform .2s, filter .2s;
    }
    .close:hover{ transform: scale(1.07); filter: brightness(1.05); }

    .card-body{ padding:18px 22px 24px; display:grid; gap:14px }
    .kb-section{
      background: #ffffffea;
      border:1px solid #e5e7eb;
      border-left:6px solid var(--accent);
      border-radius:14px;
      padding:14px 16px 14px;
      box-shadow: 0 8px 18px rgba(0,0,0,.06);
    }
    .kb-head{
      font-size:13px; font-weight:800; letter-spacing:.6px; text-transform:uppercase;
      color:#0b1220; display:flex; align-items:center; gap:8px; margin:0 0 8px;
    }
    .kb-head .emoji{ font-size:16px }
    .desc{ margin:0; color:#111827; line-height:1.6; font-size:14.5px }
    .steps{ margin:8px 0 0 0; padding-left:18px; color:#111827 }
    .steps li{ margin:6px 0; line-height:1.6; font-size:14.5px }
    .app{ margin:0; color:#0f5132; background: #d1fae5; border:1px solid #a7f3d0; padding:10px 12px; border-radius:10px; }

    /* لینک‌ها در More Info */
    .links { display:flex; flex-wrap:wrap; gap:8px; }
    .link-btn{
      display:inline-flex; align-items:center; gap:6px;
      padding:8px 12px; border-radius:10px; font-size:13px; text-decoration:none;
      color:#0b1220; background:#fff; border:1px solid color-mix(in srgb, var(--accent) 55%, #cbd5e1);
      box-shadow: 0 3px 10px rgba(0,0,0,.06);
      transition: transform .15s, filter .15s;
    }
    .link-btn:hover{ transform: translateY(-2px); filter: brightness(1.03); }

    @keyframes fadeIn{ from{opacity:0} to{opacity:1} }
    @keyframes popIn{ from{transform:translateY(12px) scale(.98); opacity:0} to{transform:translateY(0) scale(1); opacity:1} }

    /* ریسپانسیو برای موبایل */
    @media (max-width:520px){
      .circle{ width:104px; height:104px; font-size:12px; padding:10px }
      .card-body{ padding:14px }
    }
    .btn-primary{
  background: color-mix(in srgb, var(--accent) 55%, #fff);
  border: 1px solid color-mix(in srgb, var(--accent) 65%, #cbd5e1);
  color:#0b1220; padding:8px 14px; border-radius:10px; cursor:pointer;
  box-shadow: 0 3px 10px rgba(0,0,0,.06);
}
.btn-primary:hover{ filter:brightness(1.05) }
.btn-secondary{
  background:#fff; border:1px solid #d1d5db; color:#374151; padding:8px 14px;
  border-radius:10px; cursor:pointer; margin-left:8px;
}
.grid-2{
  display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px;
}
.grid-2 .full{ grid-column: 1 / -1; }
#tailorForm label{ display:flex; flex-direction:column; gap:6px; font-size:13px; color:#111827 }
#tailorForm input, #tailorForm textarea, #tailorForm select{
  width:100%; padding:10px 12px; border:1px solid #e5e7eb; border-radius:10px; background:#fff;
}
.actions{ margin-top:10px; display:flex; align-items:center; gap:8px }
.status{ font-size:13px; color:#64748b }
@media (max-width:680px){ .grid-2{ grid-template-columns: 1fr } }
  </style>
</head>
<body>
  <h1>Teaching Methods</h1>
  <p class="sub">Click a circle to open a detailed card with <strong>Description</strong>, <strong>Steps</strong>, <strong>Application</strong>, and <strong>More Info</strong>.</p>

  <div class="container" id="circles">
    <div class="circle c1"  onclick="openModal(1,this)">Cooperative Learning</div>
    <div class="circle c2"  onclick="openModal(2,this)">Project-Based Learning</div>
    <div class="circle c3"  onclick="openModal(3,this)">Flipped Classroom</div>
    <div class="circle c4"  onclick="openModal(4,this)">Station Rotation</div>
    <div class="circle c5"  onclick="openModal(5,this)">Gamified Learning</div>
    <div class="circle c6"  onclick="openModal(6,this)">Digital Escape Room</div>
    <div class="circle c7"  onclick="openModal(7,this)">Inquiry WebQuest</div>
    <div class="circle c8"  onclick="openModal(8,this)">Peer Instruction</div>
    <div class="circle c9"  onclick="openModal(9,this)">Interactive Sims</div>
    <div class="circle c10" onclick="openModal(10,this)">AR / VR</div>
    <div class="circle c11" onclick="openModal(11,this)">Virtual Labs</div>
    <div class="circle c12" onclick="openModal(12,this)">Adaptive Paths</div>
    <div class="circle c13" onclick="openModal(13,this)">AI Tutoring</div>
    <div class="circle c14" onclick="openModal(14,this)">H5P Video</div>
    <div class="circle c15" onclick="openModal(15,this)">Digital Story</div>
    <div class="circle c16" onclick="openModal(16,this)">Concept Mapping</div>
    <div class="circle c17" onclick="openModal(17,this)">Collab Docs</div>
    <div class="circle c18" onclick="openModal(18,this)">Social Annotation</div>
    <div class="circle c19" onclick="openModal(19,this)">Peer Review</div>
    <div class="circle c20" onclick="openModal(20,this)">Formative Quiz</div>
    <div class="circle c21" onclick="openModal(21,this)">Analytics</div>
    <div class="circle c22" onclick="openModal(22,this)">Mastery Learning</div>
    <div class="circle c23" onclick="openModal(23,this)">Spaced Repetition</div>
    <div class="circle c24" onclick="openModal(24,this)">Branching Case</div>
    <div class="circle c25" onclick="openModal(25,this)">Maker / STEAM</div>
    <div class="circle c26" onclick="openModal(26,this)">Podcasting</div>
    <div class="circle c27" onclick="openModal(27,this)">Data Projects</div>
    <div class="circle c28" onclick="openModal(28,this)">Scratch Coding</div>
    <div class="circle c29" onclick="openModal(29,this)">Virtual Field Trip</div>
    <div class="circle c30" onclick="openModal(30,this)">Design Thinking</div>
  </div>

  <!-- MODAL -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="mTitle">
      <button class="close" onclick="closeModal()" aria-label="Close">×</button>
      <div class="card-header">
        <h2 class="title" id="mTitle">Title</h2>
        <span class="chip">Teaching Method</span>
      </div>
      <div class="card-body">
        <section class="kb-section" id="tailorSection">
  <h3 class="kb-head"><span class="emoji">🤖</span> Tailor with AI</h3>

  <button class="btn-primary" type="button" onclick="toggleTailorForm()">Open form</button>

  <form id="tailorForm" onsubmit="generatePlan(event)" hidden style="margin-top:10px">
    <div class="grid-2">
      <label>
        <span>Grade / Age *</span>
        <input id="tGradeAge" type="text" placeholder="e.g., Grade 4 (ages 9–10)" required>
      </label>
      <label>
        <span>Subject / Topic *</span>
        <input id="tSubjectTopic" type="text" placeholder="e.g., Math — Fractions" required>
      </label>
      <label class="full">
        <span>Learning Objectives (2–3) *</span>
        <textarea id="tObjectives" rows="3" placeholder="One per line" required></textarea>
      </label>
      <label class="full">
        <span>Prior Knowledge / Challenges</span>
        <textarea id="tPrior" rows="2" placeholder="What students already know; common difficulties"></textarea>
      </label>
      <label class="full">
        <span>Class Size & Diversity (ELL/IEP, etc.)</span>
        <input id="tClassProfile" type="text" placeholder="e.g., 28 students; 6 ELL; 2 IEP">
      </label>
      <label>
        <span>Tech Access</span>
        <select id="tTech">
          <option>Low</option><option selected>Medium</option><option>High</option>
        </select>
      </label>
      <label>
        <span>Time</span>
        <select id="tTime">
          <option>15 minutes</option><option>30 minutes</option><option selected>45 minutes</option><option>60 minutes</option><option>90 minutes</option>
        </select>
      </label>
      <label>
        <span>Tone</span>
        <select id="tTone">
          <option selected>Friendly</option><option>Formal</option>
        </select>
      </label>
    </div>

    <div class="actions">
      <button id="btnGenerate" class="btn-primary" type="submit">Generate</button>
      <button class="btn-secondary" type="button" onclick="toggleTailorForm(false)">Cancel</button>
      <span id="tailorStatus" class="status" aria-live="polite" hidden>Working…</span>
    </div>
  </form>
</section>
        <section class="kb-section">
          <h3 class="kb-head"><span class="emoji">✨</span> Description</h3>
          <p class="desc" id="mDesc"></p>
        </section>
        <section class="kb-section">
          <h3 class="kb-head"><span class="emoji">✅</span> Steps</h3>
          <ol class="steps" id="mSteps"></ol>
        </section>
        <section class="kb-section">
          <h3 class="kb-head"><span class="emoji">🎯</span> Application</h3>
          <p class="app" id="mApp"></p>
        </section>
        <section class="kb-section">
          <h3 class="kb-head"><span class="emoji">🔗</span> More Info</h3>
          <div class="links" id="mLinks"></div>
        </section>
      </div>
    </div>
  </div>

  <script>
    const modal = document.getElementById('modal');
    const titleEl = document.getElementById('mTitle');
    const descEl  = document.getElementById('mDesc');
    const stepsEl = document.getElementById('mSteps');
    const appEl   = document.getElementById('mApp');
    const linksEl = document.getElementById('mLinks');
    const card    = document.querySelector('.modal-card');

    /* 
      ساختار هر مورد:
      {
        title:"...", 
        description:"...", 
        steps:["...", "..."], 
        application:"...", 
        more:[ {label:"...", url:"...", download:true|false}, ... ]
      }
      - برای لینک فایل داخل ریپو (مثلا PDF): url: "assets/file.pdf", download:true
      - اگر چیزی نداری، آرایه more رو خالی بذار []
    */
    const contents = {
      1:{
        title:"Cooperative Learning",
        description:"Students work in small, diverse groups with shared goals and individual accountability; roles and peer support drive learning.",
        steps:[
          "Form 3–5 member groups; assign roles (facilitator, recorder, checker, reporter).",
          "Define a shared goal and individual deliverables for accountability.",
          "Monitor process, model social skills, prompt peer feedback.",
          "Share results; reflect on collaboration and learning."
        ],
        application:"Great for problem-solving, jigsaw reading, peer instruction, and labs to build communication and teamwork.",
        more:[]
      },
      2:{
        title:"Project-Based Learning",
        description:"Learners investigate an authentic question over time and create products/presentations through inquiry, design, and reflection.",
        steps:[
          "Craft a driving question and success criteria.",
          "Plan milestones, roles, and resources; set checkpoints.",
          "Support research, prototyping, revisions via feedback.",
          "Showcase products; reflect on process and outcomes."
        ],
        application:"Interdisciplinary units, community challenges, real-world briefs where creativity and persistence matter.",
        more:[]
      },
      3:{
        title:"Flipped Classroom",
        description:"Direct instruction moves outside class (videos/readings) so in-class time focuses on practice, feedback, and higher-order tasks.",
        steps:[
          "Provide short pre-class content (video, reading, quiz).",
          "Check understanding with a quick formative task.",
          "Use class for discussion, problem-solving, coaching.",
          "Close with reflection and next-step resources."
        ],
        application:"Math worked examples, language practice, lab prep; boosts active time with the teacher.",
        more:[]
      },
      4:{
        title:"Station Rotation (Blended)",
        description:"Students rotate through online, teacher-led, and collaborative stations to differentiate pace and support.",
        steps:[
          "Design 3–4 stations (online practice, small-group mini-lesson, collaboration, extension).",
          "Set timers and clear goals/resources per station.",
          "Monitor, confer, and adjust groups by need.",
          "Collect quick evidence; rotate next session."
        ],
        application:"Great for mixed-ability classes; balances tech practice with targeted instruction.",
        more:[]
      },
      5:{
        title:"Gamified Learning",
        description:"Applies game elements (points, levels, badges, quests) to boost engagement and persistence in non-game tasks.",
        steps:[
          "Define learning goals → map to quests/challenges.",
          "Design points, levels, badges with clear criteria.",
          "Add feedback, streaks, and optional leaderboards.",
          "Reflect on strategies and progress, not just points."
        ],
        application:"Vocabulary missions, math quests, writing streaks; supports motivation and practice.",
        more:[]
      },
      6:{
        title:"Digital Escape Room",
        description:"Learners solve curriculum-aligned puzzles/riddles in a themed scenario to 'unlock' stages collaboratively.",
        steps:[
          "Pick theme and standards; craft narrative and puzzles.",
          "Build locks/clues (forms, slides, sites, QR codes).",
          "Assign roles; timebox; encourage clue-sharing.",
          "Debrief on content and collaboration strategies."
        ],
        application:"Review units, launch projects, assess applied understanding in teams.",
        more:[]
      },
      7:{
        title:"Inquiry WebQuest",
        description:"Guided online inquiry with curated resources and structured tasks culminating in a product or presentation.",
        steps:[
          "Pose an open-ended driving task and roles.",
          "Curate credible resources; scaffold note-taking.",
          "Assign deliverable (report, poster, video).",
          "Share findings; evaluate sources and claims."
        ],
        application:"History controversies, science phenomena, media literacy and source evaluation.",
        more:[]
      },
      8:{
        title:"Peer Instruction (Live Polling)",
        description:"Concept questions with vote–discuss–revote cycles leverage peer explanations to correct misconceptions.",
        steps:[
          "Pose a conceptual multiple-choice question.",
          "Students vote individually (clicker/poll).",
          "Pairs discuss reasoning; revote.",
          "Explain and clarify; capture misconceptions."
        ],
        application:"STEM concepts, grammar usage, conceptual checkpoints across subjects.",
        more:[]
      },
      9:{
        title:"Interactive Simulations",
        description:"Students manipulate variables in interactive models to explore cause–effect and build conceptual understanding.",
        steps:[
          "Introduce key variables and prediction prompt.",
          "Explore the sim; collect observations/data.",
          "Discuss patterns; connect to formal models.",
          "Apply learning to new scenarios."
        ],
        application:"Physics, chemistry, econ, ecology; supports inquiry with immediate visual feedback.",
        more:[]
      },
      10:{
        title:"AR / VR Explorations",
        description:"Augmented/virtual reality immerses learners in places, processes, or phenomena that are otherwise inaccessible.",
        steps:[
          "Set clear objectives and safety/ethics norms.",
          "Guide exploration tasks and checkpoints.",
          "Prompt reflection (what? so what? now what?).",
          "Transfer insights to class projects."
        ],
        application:"Virtual field trips, anatomy, historical sites, lab simulations.",
        more:[]
      },
      11:{
        title:"Virtual Labs",
        description:"Simulated labs model procedures and data collection for practice, preview, or make-up experiences.",
        steps:[
          "Brief goals and lab protocol.",
          "Run the simulation; record data/notes.",
          "Analyze results; compare with expected patterns.",
          "Reflect on limitations and next steps."
        ],
        application:"When equipment/time is limited; pre-lab practice to maximize in-person lab time.",
        more:[]
      },
      12:{
        title:"Adaptive Learning Paths",
        description:"Rules or algorithms personalize content/pace based on performance and mastery evidence.",
        steps:[
          "Define mastery criteria and item banks.",
          "Set branching rules/remediation actions.",
          "Monitor dashboards; intervene strategically.",
          "Periodically reset/extend goals."
        ],
        application:"Math skills practice, literacy pathways, language learning drills.",
        more:[]
      },
      13:{
        title:"AI-Assisted Tutoring / LLM Scaffolding",
        description:"AI provides hints, feedback, and examples aligned with teacher rubrics while preserving academic integrity.",
        steps:[
          "Write guardrailed prompts (criteria, tone, limits).",
          "Embed checkpoints (self-explain before hint).",
          "Review AI feedback; add teacher corrections.",
          "Log reflections to build self-regulation."
        ],
        application:"Draft feedback, code help, language practice; supports differentiation at scale.",
        more:[]
      },
      14:{
        title:"H5P Interactive Video",
        description:"Videos with embedded questions, hotspots, and summaries to reinforce active processing.",
        steps:[
          "Chunk video; insert checks every 2–3 mins.",
          "Add hints/explanations for wrong answers.",
          "Enable retry and summary report.",
          "Use results to plan mini-lessons."
        ],
        application:"Flipped content with accountability; multilingual captions.",
        more:[]
      },
      15:{
        title:"Digital Storytelling",
        description:"Students combine script, images, audio, and video to communicate ideas with narrative structure.",
        steps:[
          "Plan storyline and storyboard frames.",
          "Collect/produce media with citations.",
          "Edit, caption, and add voice-over.",
          "Publish and peer-review using rubric."
        ],
        application:"History biographies, science explainers, SEL narratives; amplifies student voice.",
        more:[]
      },
      16:{
        title:"Concept Mapping",
        description:"Visual maps show concepts and relationships, aiding organization and knowledge integration.",
        steps:[
          "Brainstorm key ideas/terms.",
          "Connect nodes with labeled links.",
          "Revise hierarchy and cross-links.",
          "Explain the map to a peer."
        ],
        application:"Pre/post assessment, planning essays, clarifying complex systems.",
        more:[]
      },
      17:{
        title:"Collaborative Documents",
        description:"Real-time co-authoring with comments and version history builds shared products and accountability.",
        steps:[
          "Set roles (lead, editor, checker).",
          "Use comments/suggestions for feedback.",
          "Track changes; resolve threads.",
          "Submit final with contribution log."
        ],
        application:"Group reports, lab notebooks, class wikis.",
        more:[]
      },
      18:{
        title:"Social Annotation",
        description:"Students annotate readings together, questioning, linking, and explaining in the margins.",
        steps:[
          "Assign purpose (clarify, critique, connect).",
          "Seed prompts/tags; model quality notes.",
          "Require replies and upvotes/likes.",
          "Synthesize insights in class."
        ],
        application:"Close reading, research articles, media literacy.",
        more:[]
      },
      19:{
        title:"Peer Review Platforms",
        description:"Structured peer feedback with rubrics improves drafts and evaluative judgment.",
        steps:[
          "Share rubric and exemplars.",
          "Anonymous peer review (2–3 reviewers).",
          "Revise using actionable comments.",
          "Reflect on giving/receiving feedback."
        ],
        application:"Writing, design projects, presentations; builds metacognition.",
        more:[]
      },
      20:{
        title:"Formative Quiz (Low-Stakes)",
        description:"Quick checks for understanding guide immediate teaching decisions and student self-correction.",
        steps:[
          "Create brief quiz aligned to objectives.",
          "Run in class or as pre-work; show item-level feedback.",
          "Address common errors right away.",
          "Log data to track growth."
        ],
        application:"Do-now, exit tickets, pre/post checks.",
        more:[]
      },
      21:{
        title:"Learning Analytics",
        description:"Dashboards aggregate activity/assessment data to spot patterns and inform interventions.",
        steps:[
          "Pick key indicators (engagement, mastery).",
          "Visualize by student/skill/time.",
          "Plan targeted supports.",
          "Evaluate impact and iterate."
        ],
        application:"Early warning, grouping, RTI/MTSS decisions.",
        more:[]
      },
      22:{
        title:"Mastery-Based Learning",
        description:"Progress depends on demonstrating mastery, not seat time; learners get multiple pathways and attempts.",
        steps:[
          "Define competencies and performance levels.",
          "Align tasks to rubrics and exemplars.",
          "Offer reassessment paths and feedback cycles.",
          "Track mastery over time transparently."
        ],
        application:"Unit recovery, differentiation, personalized pacing.",
        more:[]
      },
      23:{
        title:"Spaced Repetition / Microlearning",
        description:"Short, frequent practice with spaced intervals improves long-term retention.",
        steps:[
          "Break content into micro-cards.",
          "Schedule spaced practice (1, 3, 7 days…).",
          "Mix retrieval modes (recall, recognition).",
          "Review difficult items more often."
        ],
        application:"Vocabulary, formulas, key facts across subjects.",
        more:[]
      },
      24:{
        title:"Branching Case (Twine)",
        description:"Learners make choices in scenarios and see consequences, practicing judgment safely.",
        steps:[
          "Map decision tree tied to outcomes.",
          "Write scenes with feedback at branches.",
          "Playtest for clarity/balance.",
          "Debrief choices and principles."
        ],
        application:"Ethics, clinical reasoning, classroom management, safety.",
        more:[]
      },
      25:{
        title:"Maker / STEAM (Arduino/micro:bit)",
        description:"Hands-on builds integrate coding, electronics, and design to solve authentic problems.",
        steps:[
          "Frame a challenge and constraints.",
          "Prototype with kits; iterate with tests.",
          "Document builds (photos, code repos).",
          "Showcase and reflect on design choices."
        ],
        application:"Prototyping sensors, art+tech, engineering tasks.",
        more:[]
      },
      26:{
        title:"Podcasting / Student Media",
        description:"Audio episodes develop research, scripting, and speaking skills for authentic audiences.",
        steps:[
          "Plan episode outline and roles.",
          "Record clean audio; add music safely-licensed.",
          "Edit and publish with show notes.",
          "Solicit peer/community feedback."
        ],
        application:"Interview experts, explainers, oral histories.",
        more:[]
      },
      27:{
        title:"Data Projects & Visualization",
        description:"Students analyze datasets and communicate insights with clear visuals and narratives.",
        steps:[
          "Pose a question; gather/clean data.",
          "Analyze and chart appropriately.",
          "Write data stories with evidence.",
          "Present and field questions."
        ],
        application:"Civics data, science experiments, school surveys.",
        more:[]
      },
      28:{
        title:"Scratch Coding Across Curriculum",
        description:"Block-based coding builds computational thinking to model stories, simulations, and games.",
        steps:[
          "Plan project (sprite behaviors, scenes).",
          "Build incrementally; test often.",
          "Peer share and debug collaboratively.",
          "Publish and reflect on logic."
        ],
        application:"Math models, interactive stories, science demos.",
        more:[]
      },
      29:{
        title:"Virtual Field Trip (Maps/Earth)",
        description:"Explorations with street view, tours, and overlays to connect places with content.",
        steps:[
          "Set inquiry focus and locations.",
          "Collect observations/screenshots.",
          "Annotate map/tour with captions.",
          "Share guided tour with class."
        ],
        application:"Geography, ecology, history, art/architecture.",
        more:[]
      },
      30:{
        title:"Design Thinking Challenge",
        description:"Human-centered problem solving through empathize–define–ideate–prototype–test cycles.",
        steps:[
          "Empathize via interviews/observations.",
          "Define user needs and insights.",
          "Ideate many solutions; select to prototype.",
          "Test with users; iterate and refine."
        ],
        application:"Community challenges, product/service design, classroom improvements.",
        more:[]
      }
    };

    function renderLinks(arr){
      if(!arr || !arr.length){
        return `<span style="color:#64748b;font-size:13px">Add links to articles, videos, or files later.</span>`;
      }
      return arr.map(l=>{
        const attrs = `href="${l.url}" target="_blank" rel="noopener" ${l.download ? 'download' : ''}`;
        const icon  = l.download ? '📎' : '🔗';
        const label = l.label || (l.download ? 'Download file' : 'Open link');
        return `<a class="link-btn" ${attrs}>${icon} ${label}</a>`;
      }).join('');
    }

    function openModal(id, el){
      // رنگ دایره را به عنوان accent مودال بگذار
      const bg = getComputedStyle(el).backgroundColor;
      card.style.setProperty('--accent', bg);

      const c = contents[id] || {title:"", description:"", steps:[], application:"", more:[]};
      titleEl.textContent = c.title || `Method ${id}`;
      descEl.textContent  = c.description || "—";
      stepsEl.innerHTML   = (c.steps && c.steps.length)
        ? c.steps.map(st => `<li>${st}</li>`).join("")
        : `<li>—</li>`;
      appEl.textContent   = c.application || "—";
      linksEl.innerHTML   = renderLinks(c.more);

      modal.style.display = 'flex';
      document.body.classList.add('modal-open');
      modal.setAttribute('aria-hidden','false');
    }

    function closeModal(){
      modal.style.display = 'none';
      document.body.classList.remove('modal-open');
      modal.setAttribute('aria-hidden','true');
    }

    // بستن با کلیک روی پس‌زمینه
    modal.addEventListener('click', (e)=>{ if(e.target === modal) closeModal(); });
    // بستن با ESC
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });
  </script>
  <script>
  /* 1) آدرس تابع Serverless خودت را اینجا بگذار */
  const ENDPOINT = '....'; // ← این را عوض کن

  /* 2) باز/بستن فرم */
  function toggleTailorForm(force){
    const form = document.getElementById('tailorForm');
    const status = document.getElementById('tailorStatus');
    if(typeof force === 'boolean'){ form.hidden = !force; }
    else { form.hidden = !form.hidden; }
    status.hidden = true;
  }

  /* 3) ارسال فرم و پر کردن کارت */
  async function generatePlan(e){
    e.preventDefault();
    const btn = document.getElementById('btnGenerate');
    const status = document.getElementById('tailorStatus');
    status.hidden = false; status.textContent = 'Working…';
    btn.disabled = true;

    // جمع‌آوری ورودی‌ها
    const payload = {
      gradeAge:       document.getElementById('tGradeAge').value.trim(),
      subjectTopic:   document.getElementById('tSubjectTopic').value.trim(),
      objectives:     document.getElementById('tObjectives').value.split('\n').map(s=>s.trim()).filter(Boolean),
      priorKnowledge: document.getElementById('tPrior').value.trim(),
      classProfile:   document.getElementById('tClassProfile').value.trim(),
      techAccess:     document.getElementById('tTech').value,
      timeAvailable:  document.getElementById('tTime').value,
      tone:           document.getElementById('tTone').value
    };

    // اعتبارسنجی خیلی ساده
    if(!payload.gradeAge || !payload.subjectTopic || payload.objectives.length===0){
      status.textContent = 'Please complete the required fields.'; btn.disabled = false; return;
    }

    try{
      const res = await fetch(ENDPOINT, {
        method:'POST',
        headers:{ 'Content-Type':'application/json' },
        body: JSON.stringify({ inputs: payload })
      });
      if(!res.ok) throw new Error('API error');
      const data = await res.json(); // انتظار ساختار زیر:

      /* ساختار مورد انتظار از API:
         {
           title: "…",
           description: "…",
           steps: [{text:"…", time:"…", materials:"…"}, ...]  یا  ["…","…"]
           application: "…",
           more: [{label:"…", url:"…", download:true|false}, ...]
         }
      */

      // پر کردن مودال با پاسخ
      titleEl.textContent = data.title || titleEl.textContent;
      descEl.textContent  = data.description || '—';

      // Steps می‌تواند آرایهٔ شیء یا رشته باشد
      const steps = Array.isArray(data.steps) ? data.steps : [];
      if(steps.length){
        stepsEl.innerHTML = steps.map(s=>{
          if(typeof s === 'string') return `<li>${s}</li>`;
          const bits = [s.text, s.time ? `<em>(${s.time})</em>`:'', s.materials ? ` – ${s.materials}`:''].filter(Boolean).join(' ');
          return `<li>${bits}</li>`;
        }).join('');
      }else{
        stepsEl.innerHTML = '<li>—</li>';
      }

      appEl.textContent = data.application || '—';

      // More Info
      if(typeof renderLinks === 'function' && Array.isArray(data.more)){
        linksEl.innerHTML = renderLinks(data.more);
      }else{
        linksEl.innerHTML = '<span style="color:#64748b;font-size:13px">Add links later.</span>';
      }

      status.textContent = 'Done ✔️';
    }catch(err){
      console.error(err);
      status.textContent = 'Sorry, something went wrong. Try again.';
    }finally{
      btn.disabled = false;
    }
  }
</script>
</body>
</html>
